<?xml version="1.0" encoding="UTF-8"?>
<!--
This is free and unencumbered software released into the public domain.
For specific language governing permissions and limitations refer to
the LICENSE.md file or http://unlicense.org
-->
<secas xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/service-eca-1.5.xsd">
    <!-- Invoice GL Posting -->
    <seca service="update#mantle.account.invoice.Invoice" when="post-service" run-on-error="false">
        <condition><expression>statusChanged &amp;&amp; (statusId == 'InvoiceFinalized' || statusId == 'InvoiceApproved')</expression></condition>
        <actions><service-call name="mantle.ledger.InvoiceAutoPostServices.post#Invoice" in-map="context" ignore-error="true"/></actions>
    </seca>

    <!-- Payment GL Posting -->
    <seca service="update#mantle.account.payment.Payment" when="post-service" run-on-error="false">
        <condition><expression>statusChanged &amp;&amp; statusId == 'PmntDelivered'</expression></condition>
        <actions><service-call name="mantle.ledger.PaymentAutoPostServices.post#Payment" in-map="context" ignore-error="true"/></actions>
    </seca>
    <!-- Payment Application GL Posting -->
    <seca service="create#mantle.account.payment.PaymentApplication" when="post-service" run-on-error="false">
        <actions><service-call name="mantle.ledger.PaymentAutoPostServices.post#PaymentApplication" in-map="context" ignore-error="true"/></actions>
    </seca>

    <!-- Asset Receipt GL Posting -->
    <seca service="create#mantle.product.receipt.AssetReceipt" when="post-service" run-on-error="false">
        <actions><service-call name="mantle.ledger.InventoryAutoPostServices.post#AssetReceipt" in-map="context" ignore-error="true"/></actions>
    </seca>
    <!-- Asset Issuance GL Posting -->
    <seca service="create#mantle.product.issuance.AssetIssuance" when="post-service" run-on-error="false">
        <actions><service-call name="mantle.ledger.InventoryAutoPostServices.post#AssetIssuance" in-map="context" ignore-error="true"/></actions>
    </seca>
</secas>
