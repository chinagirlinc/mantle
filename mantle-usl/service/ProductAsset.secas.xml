<?xml version="1.0" encoding="UTF-8"?>
<!--
This is free and unencumbered software released into the public domain.
For specific language governing permissions and limitations refer to
the LICENSE.md file or http://unlicense.org
-->
<secas xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/service-eca-1.5.xsd">
    <seca service="update#mantle.order.OrderHeader" when="post-service">
        <condition><expression>statusChanged &amp;&amp; statusId == 'OrderPlaced'</expression></condition>
        <actions><service-call name="mantle.product.AssetServices.reserve#AssetsForOrder" in-map="context"/></actions>
    </seca>

    <seca service="create#mantle.order.OrderItem" when="post-service">
        <actions><service-call name="mantle.product.AssetServices.reserve#AssetForOrderItem" in-map="context"/></actions>
    </seca>
    <seca service="update#mantle.order.OrderItem" when="post-service">
        <actions><service-call name="mantle.product.AssetServices.reserve#AssetForOrderItem" in-map="context"/></actions>
    </seca>
</secas>
