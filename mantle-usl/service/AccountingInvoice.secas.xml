<?xml version="1.0" encoding="UTF-8"?>
<!--
This is free and unencumbered software released into the public domain.
For specific language governing permissions and limitations refer to
the LICENSE.md file or http://unlicense.org
-->
<secas xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/service-eca-1.5.xsd">
    <seca service="update#mantle.shipment.Shipment" when="post-service">
        <condition><expression>statusChanged &amp;&amp; statusId == 'ShipPacked'</expression></condition>
        <actions><service-call name="mantle.account.InvoiceServices.create#SalesShipmentInvoices"
                in-map="context + [statusId:'InvoiceFinalized']"/></actions>
    </seca>
    <seca service="update#mantle.shipment.Shipment" when="post-service">
        <condition><expression>statusChanged &amp;&amp; statusId == 'ShipDelivered'</expression></condition>
        <actions><service-call name="mantle.account.InvoiceServices.create#PurchaseShipmentInvoices"
                in-map="context + [statusId:'InvoiceReceived']"/></actions>
    </seca>
</secas>
