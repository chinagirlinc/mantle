<?xml version="1.0" encoding="UTF-8"?>
<!--
This is free and unencumbered software released into the public domain.
For specific language governing permissions and limitations refer to
the LICENSE.md file or http://unlicense.org
-->
<eecas xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/entity-eca-1.5.xsd">
    <eeca entity="mantle.work.time.TimeEntry" on-create="true" on-update="true" on-delete="true" get-entire-entity="true">
        <actions><service-call name="mantle.work.TaskServices.update#TaskFromTime" in-map="context"/></actions>
    </eeca>

    <eeca entity="mantle.work.effort.WorkEffort" on-create="true" on-update="true" on-delete="true" get-entire-entity="true">
        <condition><expression>rootWorkEffortId != null &amp;&amp; workEffortTypeEnumId == 'WetTask'</expression></condition>
        <actions><service-call name="mantle.work.TaskServices.update#ProjectTimeFromTask" in-map="context"/></actions>
    </eeca>
    <eeca entity="mantle.work.effort.WorkEffort" on-create="true" on-update="true" on-delete="false" run-before="true" get-entire-entity="true">
        <condition><expression>workEffortTypeEnumId == 'WetTask'</expression></condition>
        <actions><service-call name="mantle.work.TaskServices.set#TaskDefaults" in-map="context"/></actions>
    </eeca>
</eecas>
